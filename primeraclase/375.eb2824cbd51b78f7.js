"use strict";(self.webpackChunkprimeraclase=self.webpackChunkprimeraclase||[]).push([[375],{6375:(z,c,r)=>{r.r(c),r.d(c,{ListUsersModule:()=>H});var d=r(9808),u=r(3007),i=r(3075),e=r(5e3),h=r(4961),p=r(3759),U=r(7322),C=r(7531),T=r(7446),f=r(7423);function Z(t,s){1&t&&e._uU(0,"Datos personales")}function v(t,s){1&t&&e._uU(0,"Datos de sesi\xf3n")}function b(t,s){1&t&&e._uU(0,"Resumen")}function N(t,s){1&t&&e._uU(0,"Datos personales")}function x(t,s){if(1&t){const o=e.EpF();e.TgZ(0,"div",16)(1,"div")(2,"button",17),e.NdJ("click",function(){return e.CHM(o),e.oxw().deleteUser()}),e._uU(3,"Borrar usuario"),e.qZA()()()}}let g=(()=>{class t{constructor(o,n,a){this._formBuilder=o,this.route=n,this.userService=a,this.checked=!1}ngOnInit(){this.route.snapshot.params.id?(this.idUser=this.route.snapshot.params.id,this.createFormWithData(),this.labelButton="Actualizar usuario"):(this.createFormEmpty(),this.labelButton="Crear usuario")}createFormWithData(){let o=this.getUserById(this.idUser);this.firstFormGroup=this._formBuilder.group({nombre:[o[0].nombre,i.kI.required],apellido:[o[0].apellido,i.kI.required]}),this.secondFormGroup=this._formBuilder.group({mail:[o[0].username,i.kI.required],password:[o[0].password,i.kI.required]}),this.checked=o[0].admin,this.nombre=o[0].nombre,this.apellido=o[0].apellido,this.email=o[0].username}createFormEmpty(){this.firstFormGroup=this._formBuilder.group({nombre:["",i.kI.required],apellido:["",i.kI.required]}),this.secondFormGroup=this._formBuilder.group({mail:["",i.kI.required],password:["",i.kI.required]})}guardar(){let o;o={id:this.idUser?this.idUser:Math.random(),username:this.secondFormGroup.controls.mail.value,password:this.secondFormGroup.controls.password.value,admin:this.checked,nombre:this.firstFormGroup.controls.nombre.value,apellido:this.firstFormGroup.controls.apellido.value},this.idUser?this.userService.updateUser(o):this.userService.addUser(o)}deleteUser(){this.userService.deleteUser(this.idUser)}getUserById(o){return this.userService.getUserById(o).subscribe(n=>{this.user=n}),this.user}changeForm(o){"nombre"==o&&(this.nombre=this.firstFormGroup.controls.nombre.value),"apellido"==o&&(this.apellido=this.firstFormGroup.controls.apellido.value),"email"==o&&(this.email=this.secondFormGroup.controls.mail.value)}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(i.qu),e.Y36(u.gz),e.Y36(h.K))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-users"]],decls:46,vars:11,consts:[["stepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],[1,"row"],[1,"col-xs-12"],["matInput","","placeholder","Nombre","formControlName","nombre","required","",3,"change"],["matInput","","placeholder","Apellido","formControlName","apellido","required","",3,"change"],["matInput","","placeholder","Email","formControlName","mail","required","",3,"change"],["type","password","autocomplete","false","matInput","","placeholder","Password","formControlName","password"],[1,"example-margin",3,"ngModel","ngModelChange"],["matInput","","placeholder","Nombre","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Apellido","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Email","required","",3,"ngModel","ngModelChange"],["mat-flat-button","","color","primary",3,"click"],["class","col-xs-6",4,"ngIf"],[1,"col-xs-6"],["mat-flat-button","","color","warn",3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"mat-vertical-stepper",null,0)(2,"mat-step",1)(3,"form",2),e.YNc(4,Z,1,0,"ng-template",3),e.TgZ(5,"div",4)(6,"div",5)(7,"mat-form-field")(8,"input",6),e.NdJ("change",function(){return n.changeForm("nombre")}),e.qZA()()(),e.TgZ(9,"div",5)(10,"mat-form-field")(11,"input",7),e.NdJ("change",function(){return n.changeForm("apellido")}),e.qZA()()()()()(),e.TgZ(12,"mat-step",1)(13,"form",2),e.YNc(14,v,1,0,"ng-template",3),e.TgZ(15,"div",4)(16,"div",5)(17,"mat-form-field")(18,"input",8),e.NdJ("change",function(){return n.changeForm("email")}),e.qZA()()(),e.TgZ(19,"div",5)(20,"mat-form-field"),e._UZ(21,"input",9),e.qZA()()()(),e.TgZ(22,"mat-checkbox",10),e.NdJ("ngModelChange",function(m){return n.checked=m}),e._uU(23,"Admin"),e.qZA()(),e.TgZ(24,"mat-step"),e.YNc(25,b,1,0,"ng-template",3),e.YNc(26,N,1,0,"ng-template",3),e.TgZ(27,"div",4)(28,"div",5)(29,"mat-form-field")(30,"input",11),e.NdJ("ngModelChange",function(m){return n.nombre=m}),e.qZA()()(),e.TgZ(31,"div",5)(32,"mat-form-field")(33,"input",12),e.NdJ("ngModelChange",function(m){return n.apellido=m}),e.qZA()()(),e.TgZ(34,"div",5)(35,"mat-form-field")(36,"input",13),e.NdJ("ngModelChange",function(m){return n.email=m}),e.qZA()()(),e.TgZ(37,"div",5)(38,"mat-checkbox",10),e.NdJ("ngModelChange",function(m){return n.checked=m}),e._uU(39,"Admin"),e.qZA()()(),e.TgZ(40,"div",5)(41,"div")(42,"button",14),e.NdJ("click",function(){return n.guardar()}),e._uU(43),e.qZA()()(),e.YNc(44,x,4,0,"div",15),e.qZA()(),e._UZ(45,"router-outlet")),2&o&&(e.xp6(2),e.Q6J("stepControl",n.firstFormGroup),e.xp6(1),e.Q6J("formGroup",n.firstFormGroup),e.xp6(9),e.Q6J("stepControl",n.secondFormGroup),e.xp6(1),e.Q6J("formGroup",n.secondFormGroup),e.xp6(9),e.Q6J("ngModel",n.checked),e.xp6(8),e.Q6J("ngModel",n.nombre),e.xp6(3),e.Q6J("ngModel",n.apellido),e.xp6(3),e.Q6J("ngModel",n.email),e.xp6(2),e.Q6J("ngModel",n.checked),e.xp6(5),e.Oqu(n.labelButton),e.xp6(1),e.Q6J("ngIf",n.idUser))},directives:[p.Vq,p.C0,i._Y,i.JL,i.sg,p.VY,U.KE,C.Nt,i.Fj,i.JJ,i.u,i.Q7,T.oG,i.On,f.lW,d.O5,u.lC],styles:[""]}),t})();var l=r(4999),A=r(727),M=r(5245);function y(t,s){1&t&&(e.TgZ(0,"div",12)(1,"button",13),e._uU(2," Agregar usuario "),e.qZA()()),2&t&&e.Q6J("routerLink","/users/abm")}function L(t,s){1&t&&(e.TgZ(0,"th",14),e._uU(1,"Usuario"),e.qZA())}function J(t,s){if(1&t&&(e.TgZ(0,"td",15),e._uU(1),e.qZA()),2&t){const o=s.$implicit;e.xp6(1),e.Oqu(o.username)}}function F(t,s){1&t&&(e.TgZ(0,"th",14),e._uU(1,"Nombre"),e.qZA())}function q(t,s){if(1&t&&(e.TgZ(0,"td",15),e._uU(1),e.qZA()),2&t){const o=s.$implicit;e.xp6(1),e.Oqu(o.nombre)}}function I(t,s){1&t&&(e.TgZ(0,"th",14),e._uU(1,"Apellido"),e.qZA())}function Y(t,s){if(1&t&&(e.TgZ(0,"td",15),e._uU(1),e.qZA()),2&t){const o=s.$implicit;e.xp6(1),e.Oqu(o.apellido)}}function k(t,s){1&t&&(e.TgZ(0,"th",14),e._uU(1,"Email"),e.qZA())}function B(t,s){if(1&t&&(e.TgZ(0,"td",15),e._uU(1),e.qZA()),2&t){const o=s.$implicit;e.xp6(1),e.Oqu(o.username)}}function Q(t,s){1&t&&(e.TgZ(0,"th",14),e._uU(1,"Admin"),e.qZA())}function G(t,s){if(1&t&&(e.TgZ(0,"td",15),e._uU(1),e.qZA()),2&t){const o=s.$implicit;e.xp6(1),e.Oqu(o.admin)}}function w(t,s){1&t&&(e.TgZ(0,"th",14),e._uU(1,"actions"),e.qZA())}function D(t,s){if(1&t){const o=e.EpF();e.TgZ(0,"td",15)(1,"button",17),e.NdJ("click",function(){const m=e.CHM(o).$implicit;return e.oxw(2).goToUserById(m.id)}),e.TgZ(2,"mat-icon"),e._uU(3," visibility"),e.qZA()()()}}function O(t,s){1&t&&(e.ynx(0,16),e.YNc(1,w,2,0,"th",3),e.YNc(2,D,4,0,"td",4),e.BQk())}function S(t,s){1&t&&e._UZ(0,"tr",18)}function R(t,s){1&t&&e._UZ(0,"tr",19)}const E=[{path:"",component:(()=>{class t{constructor(o,n){this.user=o,this.route=n,this.displayedColumns=["Usuario","Nombre","Apellido","email","Admin"]}ngOnInit(){this.auth=localStorage.getItem("user");let o=JSON.parse(this.auth);this.admin=o[0].admin,this.admin&&this.displayedColumns.push("actions"),this.subscriptions=new A.w0,this.subscriptions.add(this.user.getUsers().subscribe(n=>{this.users=n})),this.user.getUserName(),this.dataSource=new l.by(this.users)}goToUserById(o){this.route.navigate(["/users/abm/",o])}ngOnDestroy(){this.subscriptions&&this.subscriptions.unsubscribe()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(h.K),e.Y36(u.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-list-users"]],viewQuery:function(o,n){if(1&o&&e.Gf(l.BZ,5),2&o){let a;e.iGM(a=e.CRH())&&(n.tabla1=a.first)}},decls:21,vars:5,consts:[["class","demo-button-container",3,"routerLink",4,"ngIf"],["mat-table","",3,"dataSource"],["matColumnDef","Usuario"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Nombre"],["matColumnDef","Apellido"],["matColumnDef","email"],["matColumnDef","Admin"],["matColumnDef","actions",4,"ngIf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"demo-button-container",3,"routerLink"],["mat-raised-button","",1,"demo-button"],["mat-header-cell",""],["mat-cell",""],["matColumnDef","actions"],["mat-Tooltip","Ver detalles","type","button","mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,n){1&o&&(e.YNc(0,y,3,1,"div",0),e.TgZ(1,"table",1),e.ynx(2,2),e.YNc(3,L,2,0,"th",3),e.YNc(4,J,2,1,"td",4),e.BQk(),e.ynx(5,5),e.YNc(6,F,2,0,"th",3),e.YNc(7,q,2,1,"td",4),e.BQk(),e.ynx(8,6),e.YNc(9,I,2,0,"th",3),e.YNc(10,Y,2,1,"td",4),e.BQk(),e.ynx(11,7),e.YNc(12,k,2,0,"th",3),e.YNc(13,B,2,1,"td",4),e.BQk(),e.ynx(14,8),e.YNc(15,Q,2,0,"th",3),e.YNc(16,G,2,1,"td",4),e.BQk(),e.YNc(17,O,3,0,"ng-container",9),e.YNc(18,S,1,0,"tr",10),e.YNc(19,R,1,0,"tr",11),e.qZA(),e._UZ(20,"router-outlet")),2&o&&(e.Q6J("ngIf",n.admin),e.xp6(1),e.Q6J("dataSource",n.users),e.xp6(16),e.Q6J("ngIf",n.admin),e.xp6(1),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns))},directives:[d.O5,u.rH,f.lW,l.BZ,l.w1,l.fO,l.ge,l.Dz,l.ev,M.Hw,l.as,l.XQ,l.nj,l.Gk,u.lC],styles:["table[_ngcontent-%COMP%]{width:100%;overflow-x:auto;overflow-y:hidden;min-width:500px}th.mat-header-cell[_ngcontent-%COMP%]{text-align:left;max-width:300px}"]}),t})(),loadChildren:()=>r.e(239).then(r.bind(r,9239)).then(t=>t.UsersModule)},{path:"abm",component:g},{path:"abm/:id",component:g}];let _=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[u.Bz.forChild(E)],u.Bz]}),t})(),H=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[d.ez,_],_]}),t})()}}]);